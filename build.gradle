plugins {
  id 'me.champeau.gradle.jmh' version '0.3.0'
}

repositories {
	mavenLocal()
	mavenCentral()
}

apply plugin: 'me.champeau.gradle.jmh'
apply plugin: 'java'
apply plugin: 'maven'
apply plugin: 'eclipse'
apply plugin: 'jacoco'

group = 'com.squarespace.cldrengine'

sourceCompatibility = 1.8
targetCompatibility = 1.8

project.ext {
	ccVersion = '1.0.6'
	gsonVersion = '2.8.6'
	hamcrestVersion = '2.2'
	lombokVersion = '1.18.10'
 	testngVersion = '7.1.0'
}

dependencies {
  //compile "com.squarespace.compiler:compiler-core:${ccVersion}"
  
  implementation "com.google.code.gson:gson:${gsonVersion}"

  compileOnly "org.projectlombok:lombok:${lombokVersion}"
  annotationProcessor "org.projectlombok:lombok:${lombokVersion}"
 
  testCompile "org.testng:testng:${testngVersion}"
  testCompile "org.hamcrest:java-hamcrest:${hamcrestVersion}"
  testCompile 'commons-io:commons-io:2.1'
}

jmh {
  jmhVersion '1.19'
  forceGC = true
  includeTests = false
  zip64 = true
  //include = '.*LanguageMatcher.*'
}

sourceSets.main.java.srcDirs = ['src/main/java', 'src/generated/java']
sourceSets.main.resources.srcDirs = ['src/main/resources', 'src/generated/resources']

eclipse {
	project {
		name = 'cldrengine'
	}
}

wrapper {
	gradleVersion = '4.9'
}

clean {
	delete 'src/generated'
}

test {
	useTestNG()
	jacoco {
		append = false
	}
}

jacoco {
	toolVersion = '0.7.9'
}

jacocoTestReport {
	group = 'Reporting'
	additionalSourceDirs = files(sourceSets.main.allJava.srcDirs)
	reports {
		xml.enabled = true
		html.enabled = true
		html.destination = "${buildDir}/jacoco-report"
	}
}

